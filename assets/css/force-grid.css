/**
 * Estilos forzados para cuadrícula de productos
 * Aplicados con alta especificidad y !important
 */
/* Forzar estilo de cuadrícula en todas las listas de productos */
body ul.products,
body.woocommerce ul.products,
body.woocommerce-page ul.products,
body .woocommerce ul.products,
html body .productos-grid,
#main ul.products,
#content ul.products,
.woocommerce .products,
.wc-productos-template ul.products,
.productos-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)) !important;
    gap: 20px !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    list-style: none !important;
    float: none !important;
    clear: both !important;
}

/* Eliminar flotadores que pueden romper la cuadrícula */
body ul.products::before,
body ul.products::after,
body.woocommerce ul.products::before,
body.woocommerce ul.products::after,
.woocommerce .products::before,
.woocommerce .products::after,
.productos-grid::before,
.productos-grid::after {
    display: none !important;
    content: none !important;
    clear: none !important;
}

/* Forzar estilo correcto para cada producto */
body ul.products li.product,
body.woocommerce ul.products li.product,
body.woocommerce-page ul.products li.product,
body .woocommerce ul.products li.product,
html body .productos-grid li.product,
#main ul.products li.product,
#content ul.products li.product,
.woocommerce .products li.product,
.wc-productos-template ul.products li.product,
.productos-grid li.product {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 0 20px 0 !important;
    padding: 0 !important;
    float: none !important;
    clear: none !important;
    box-sizing: border-box !important;
    display: flex !important;
    flex-direction: column !important;
}
/**
 * Solución CSS para limitar la cuadrícula a 3 filas exactas
 * Este código debe agregarse al final del archivo force-grid.css
 */

/* Limitar la cuadrícula a 3 filas usando grid-template-rows */
body ul.products,
body.woocommerce ul.products,
body.woocommerce-page ul.products,
body .woocommerce ul.products,
.wc-productos-template ul.products,
.productos-grid {
    grid-template-rows: repeat(3, auto) !important;
    max-height: calc(3 * (220px + 180px + 40px)) !important; /* Altura estimada de 3 filas */
    overflow: hidden !important;
}

/* Asegurar que todos los productos en las 3 primeras filas sean visibles */
body ul.products li.product:nth-child(-n+12),
body.woocommerce ul.products li.product:nth-child(-n+12),
body.woocommerce-page ul.products li.product:nth-child(-n+12),
body .woocommerce ul.products li.product:nth-child(-n+12),
.wc-productos-template ul.products li.product:nth-child(-n+12),
.productos-grid li.product:nth-child(-n+12) {
    display: flex !important;
}

/* Ocultar cualquier producto después del número 12 (asumiendo 4 columnas × 3 filas) */
body ul.products li.product:nth-child(n+13),
body.woocommerce ul.products li.product:nth-child(n+13),
body.woocommerce-page ul.products li.product:nth-child(n+13),
body .woocommerce ul.products li.product:nth-child(n+13),
.wc-productos-template ul.products li.product:nth-child(n+13),
.productos-grid li.product:nth-child(n+13) {
    display: none !important;
}
/**
 * Solución específica para el problema de div.producto-interior en la cuarta fila
 * Añadir este código al final del archivo assets/css/force-grid.css
 */

/* Asegurar que ningún elemento de producto aparezca después de 3 filas, incluyendo div.producto-interior */
body ul.products li.product:nth-child(n+13),
body.woocommerce ul.products li.product:nth-child(n+13),
body.woocommerce-page ul.products li.product:nth-child(n+13),
body .woocommerce ul.products li.product:nth-child(n+13),
.wc-productos-template ul.products li.product:nth-child(n+13),
.productos-grid li.product:nth-child(n+13),
/* Selectores específicos para el div.producto-interior */
body ul.products li.product:nth-child(n+13) .producto-interior,
body.woocommerce ul.products li.product:nth-child(n+13) .producto-interior,
body.woocommerce-page ul.products li.product:nth-child(n+13) .producto-interior,
body .woocommerce ul.products li.product:nth-child(n+13) .producto-interior,
.wc-productos-template ul.products li.product:nth-child(n+13) .producto-interior,
.productos-grid li.product:nth-child(n+13) .producto-interior {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    width: 0 !important;
    overflow: hidden !important;
    position: absolute !important;
    pointer-events: none !important;
    opacity: 0 !important;
}

/* Ocultar también cualquier div.producto-interior que pueda estar fuera de un li.product */
.wc-productos-template .productos-grid > div.producto-interior,
.woocommerce ul.products > div.producto-interior,
ul.products > div.producto-interior {
    display: none !important;
    visibility: hidden !important;
}

/* Forzar que no haya cuarta fila en el grid con grid-template-rows explícito */
body ul.products,
body.woocommerce ul.products,
body.woocommerce-page ul.products,
body .woocommerce ul.products,
.wc-productos-template ul.products,
.productos-grid {
    grid-template-rows: repeat(3, auto) !important;
    overflow: hidden !important;
    max-height: calc(3 * 500px) !important; /* Estimación del alto máximo de 3 filas */
}
/* Ajustes responsivos */
@media (max-width: 991px) {
    /* Para 3 columnas en pantallas medianas (3 columnas × 3 filas = 9 productos) */
    body ul.products li.product:nth-child(n+10),
    body.woocommerce ul.products li.product:nth-child(n+10),
    body.woocommerce-page ul.products li.product:nth-child(n+10),
    body .woocommerce ul.products li.product:nth-child(n+10),
    .wc-productos-template ul.products li.product:nth-child(n+10),
    .productos-grid li.product:nth-child(n+10) {
        display: none !important;
    }
}

@media (max-width: 768px) {
    /* Para 2 columnas en pantallas pequeñas (2 columnas × 3 filas = 6 productos) */
    body ul.products li.product:nth-child(n+7),
    body.woocommerce ul.products li.product:nth-child(n+7),
    body.woocommerce-page ul.products li.product:nth-child(n+7),
    body .woocommerce ul.products li.product:nth-child(n+7),
    .wc-productos-template ul.products li.product:nth-child(n+7),
    .productos-grid li.product:nth-child(n+7) {
        display: none !important;
    }
}
/* Media queries para responsividad */
@media (max-width: 768px) {
    body ul.products,
    body.woocommerce ul.products,
    .wc-productos-template ul.products,
    .productos-grid {
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)) !important;
    }
}

@media (max-width: 480px) {
    body ul.products,
    body.woocommerce ul.products,
    .wc-productos-template ul.products,
    .productos-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px !important;
    }
}
/**
 * Solución para ocultar cualquier div.producto-interior huérfano en la cuarta fila
 * Añadir al final de assets/css/force-grid.css
 */

/* Ocultar explícitamente cualquier div.producto-interior huérfano a nivel del contenedor */
ul.products > div.producto-interior,
.productos-grid > div.producto-interior,
.wc-productos-template ul.products > div.producto-interior,
.woocommerce ul.products > div.producto-interior {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
    opacity: 0 !important;
    width: 0 !important;
    position: absolute !important;
    pointer-events: none !important;
}

/* Asegurar que el contenedor principal tenga establecida una altura máxima clara */
ul.products,
.productos-grid,
.wc-productos-template ul.products,
.woocommerce ul.products {
    display: grid !important;
    grid-template-rows: repeat(3, minmax(min-content, max-content)) !important;
    overflow: hidden !important;
    max-height: 1200px !important; /* Valor máximo seguro para tres filas */
    margin-bottom: 30px !important;
}

/* Asegurar que solo se muestren exactamente tres filas de productos */
@media (min-width: 992px) {
    /* 4 columnas x 3 filas = 12 productos */
    ul.products > *:nth-child(n+13),
    .productos-grid > *:nth-child(n+13),
    .wc-productos-template ul.products > *:nth-child(n+13),
    .woocommerce ul.products > *:nth-child(n+13) {
        display: none !important;
    }
}

@media (max-width: 991px) and (min-width: 769px) {
    /* 3 columnas x 3 filas = 9 productos */
    ul.products > *:nth-child(n+10),
    .productos-grid > *:nth-child(n+10),
    .wc-productos-template ul.products > *:nth-child(n+10),
    .woocommerce ul.products > *:nth-child(n+10) {
        display: none !important;
    }
}

@media (max-width: 768px) and (min-width: 481px) {
    /* 2 columnas x 3 filas = 6 productos */
    ul.products > *:nth-child(n+7),
    .productos-grid > *:nth-child(n+7),
    .wc-productos-template ul.products > *:nth-child(n+7),
    .woocommerce ul.products > *:nth-child(n+7) {
        display: none !important;
    }
}

@media (max-width: 480px) {
    /* 2 columnas x 3 filas = 6 productos para móviles */
    ul.products > *:nth-child(n+7),
    .productos-grid > *:nth-child(n+7),
    .wc-productos-template ul.products > *:nth-child(n+7),
    .woocommerce ul.products > *:nth-child(n+7) {
        display: none !important;
    }
}
